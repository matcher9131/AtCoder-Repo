# [ABC429](https://atcoder.jp/contests/abc429) Review
- Rated参加
- Eに手間取りレートは微増

## D - On AtCoder Conference
- AC（18分）
- $M$ の制約を見ておらず、地点 $i$ にいる人数を $C_i$ として尺取法で余裕やろ！→`std::bad_alloc`
- ただ $C_x$ を`map`で管理すれば尺取法の方針はそのまま使えることに気づく
  - 地点 $i$ の次に人がいる場所を地点 $j$ とすると $X_i = X_{i+1} = \cdots = X_{j-1}$ が成り立つため、これらをまとめて処理できる
- 環状なので例によって2周分の $C_i$ を作るパティーン
  - ループの最後で`left > m`なら`break`するようにしておけば余計なものが入らない
- 計算量は $O(N \log N)$
- にしても久々に尺取法を使ったなぁ……

## E - Hit and Away
- AC（53分）
- 安全頂点を全て始点とする多始点BFSを思いつくも
  - `dist`に最短距離のみを2つだけ持たせる実装を考えてしまい難儀する
    - これだと`dist`に同じ始点からの距離が2回以上含まれるケースが出てきてしまう
- ようやっと`dist`に距離のみではなく距離と始点をセットにすればいけることに気づく
  - 頭が硬いですねぇ……

## F - Shortest Path Query
- 時間切れ
- 最短経路に左方向への移動は絶対に含まれないことがわかる
  - よってマス $(r_1, c_1)$ から $(r_2, c_2)$ （ただし $c_1 < c_2$ ）への移動回数の最小値を $3 \times 3$ の配列 $d_{c_1, c_2}$ で保持すると
    - 写像 $f$ が存在し、 $c_1 < c_2 < c_3$ なら $d_{c_1, c_3} = f(d_{c_1, c_2}, d_{c_2, c_3})$ とできる
    - さらに $f$ は結合法則（ $c_1 < c_2 < c_3 < c_4$ ならば　$f(f(d_{c_1, c_2}, d_{c_2, c_3}), d_{c_3, c_4}) = f(d_{c_1, c_2}, f(d_{c_2, c_3}), d_{c_3, c_4})$ ）を満たす
- よってSegment treeに任せればOK
- クエリ毎に $d_{c, c}$ を作っていたため相当実行時間が長くなった（2786ms）
  - やはりここは一発でルックアップできるようにしておくべきだったか
