## [ABC401](https://atcoder.jp/contests/abc401) Review
- Rated参加
- なんとかEまで到達
  - ただしCとEで結構詰まった
- 結果として1000位台でレートは増加
- ~~ステータスコードは絶対あると思った~~

## D - Logical Filling
- AC（17分）
- $S$ 内の'o'の数を $C$ とする
- $K = C$ のとき
  - すべての'?'を'.'に書き換えて $T$ として出力する
- $K > C$ のとき
  - 'o'の両隣にある'?'は'.'確定なので書き換える
  - 残る'?'は必ず'.'に挟まれているので、両端を'o'にできるかどうかは気にしなくて良くなる
  - 可能な限り'o'を多くする書き換えを考える
    - すなわち、連続する'?'を1つの塊と見て、左から $i$ 番目の塊が $L_i$ 文字からなるとき、その塊には最大で $\lceil \frac{L_i}{2} \rceil$ 個の'o'を含めることができる
  - $K = C + \sum \lceil \frac{L_i}{2} \rceil$ のとき
    - 'o'の数を最大化しなければならないので、'?'が奇数個連続する箇所は'o.o. ... .o'で確定する
    - '?'が偶数個連続する箇所は確定しないので'?'のままとする
  - $K < C + \sum \lceil \frac{L_i}{2} \rceil$ のとき
    - $L_i$ 文字からなる'?'の塊に $\lceil \frac{L_i}{2} \rceil$ 個 **未満** の'o'を含める場合はどの箇所も'o'にも'.'にもなり得るため、 $S$ がそのまま解になる

## E - Logical Filling
- AC（41分）
- 元のグラフを $G$ とし、 $N$ 頂点のみのグラフ $G'$ を用意する
- $k = 1, 2, \dots, N$ の順に以下を行う
  - $v_i = k$ となるすべての辺を $G'$ に繋ぐ
  - その時点における頂点 $1$ を含む連結成分に含まれる頂点の集合を $S$ とする
    - $|S| = k$ のとき
      - $S$ に含まれる各頂点の $G$ における隣接頂点の集合から $S$ 自身を取り除いたものを $T$ とすると、 $|T|$ が解になる
    - $|S| < k$ のとき
      - 頂点 $1, 2, \dots, k$ を連結にすることができないので、 $-1$ が解になる
- 実際の実装については
  - $S$ はUnion-Findに任せる
  - $T$ に関して
    - はじめ $T = \emptyset$ として、 $k = 1, 2, \dots, N$ の順に以下を行えばOK
      - 頂点 $i$ と隣接する頂点のうち頂点番号が $i$ より大きいものを $T$ に加える
      - $T$ から頂点 $i$ を（あれば）取り除く
    - $|S| < k$ のときは $T$ が解にかかわらないこと、および $|S| = k$ のときは $T$ に頂点番号が $k$ 以下のものは含まれないことから、頂点 $i$ が頂点 $1$ と（その時点で）連結かどうかに関係なく操作を行える
  - $S$ と $T$ を同時並行で管理すれば↑のアルゴリズムを実装できる
- 時間計算量は
  - 辺のソート： $O(M \log M)$
  - $S$ の管理： $v_i = k$ となるすべての辺を二分探索で探すため、$O(N \log M + M)$
  - $T$ の管理： `set`を用いることで $O(M \log N)$
- （公式解説） $u$ に注目すれば $T$ もUnion-Findで管理できるのか……



