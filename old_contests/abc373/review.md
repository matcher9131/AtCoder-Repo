# [ABC373](https://atcoder.jp/contests/abc373) Review
- バーチャル参加
- Cが簡単すぎてビビる
- 今回もEの壁だが水色最大なので仕方ない部分もある

# D - Hidden Weights
- AC
- 無駄にトポロジカルソートして、入次数が0の頂点に0を割り当ててみたが
  - 勿論2つの入次数0の頂点から別の頂点にそれぞれ辺が伸びていた場合に破綻する
- 全ての辺について、始点と終点を入れ替えて重みを $-1$ 倍した辺を新たにグラフに追加しても問題文の条件は崩れない
  - あとはDFSで頂点に値を割り振ればOK

# E - How to Win the Election
- 時間切れから公式解説を見ずに提出
- 面倒なので $A_i$ は昇順とする。また、 $R = K - \sum_{i=1}^{N} A_i$ とする
- 例によって $X$ の最小値は二分探索で見つけるとして
  - 人 $i$ が確実に当選するのは、人 $i$ を除く上位 $M$ 人が $A_i + X + 1$ 票を獲得しないとき
    - すなわち $X + \sum_{j \in T} \max \{ 0, A_i + X + 1 - A_j \} > R$ （ $T$ は人 $i$ を除く上位 $M$ 人による集合）を満たせばよいが、左辺を求めるのに計算量の都合で毎度ループを回すわけにはいかない
    - しかし $T$ の要素は $i <= N - M$ のとき完全に連続、そうでなくても2つの連続した区間からなるうえに
      - $j \geq j_0 \Rightarrow A_j \geq A_i + X + 1$ となる最小の $j_0$ が存在するため、累積和を用いることで $O(\log N)$ にできる
- なお上記の $j_0$ が $N - M$ 以下のときは何票獲得しても当選できない
  - この条件を弾き忘れて $j_0 - (N - M)$ と累積和 $S_{j_0} - S_{N-M}$ の積が見事に符号を打ち消し合うというミラクル発生（1敗）
- メモ：`upper_bound(x)`よりも`lower_bound(x + 1)`のほうがふさわしいときがある
  - 同票の候補者が居たときの処理も非常に手間取った…