# [ABC372](https://atcoder.jp/contests/abc372) Review
- バーチャル参加
- Eが解けたと思ったら緑色で糠喜び
  - 相変わらず水色がねぇな！

## C - Count ABC Again
- AC(1WA)
- 変数間違いに気をつけましょう
  - `q`まででループを回すべきところを`n`にしてしまうミス(n度目)

## D - Buildings
- AC
- $i$ 番目のビルの解を $A_i$ とすると、 $A_N = 0$ は確定
- $A_i$ と $A_{i-1}$ の関係を考える
  - $i$ を固定したときに条件を満たすビル $j$ の集合を $B_i$ とおくと $A_i = |B_i|$ であり、題意より $B_i$ にはビル $i + 1$ 以降のいずれかが含まれる
    - ここにビル $i$ を加えたとき、 $B_{i-1}$ に残ることができるのは $H_j > H_i$ を満たす $j$ のみである
- よって $i = N$ から順に $B_i$ を管理すれば解ける
  - 各 $j > 1$ は $B_{j-1}$ にちょうど1回挿入され、途中で消されて以降は2度と現れない、すなわち削除も高々1回なので全体計算量は $O(N)$
    - なのだが、ビル番号ではなく高さを管理してしまったため $H_i$ の挿入位置に二分探索を用いて、条件を満たせなくなったビルを消去するのに`vector.resize()`を使うという脳筋実装をしてしまったため $O(N \log N)$ になっている
- メモ：値そのものよりもインデックスを管理したほうが楽なこともある

## E - K-th Largest Connected Components
- AC
- どうみてもUnion-findですありがとうございました
- 問題となるクエリタイプ2は、各頂点ごとに連結する頂点番号を記録した配列をUnion-findに持たせればOK
  - 愚直に連結する頂点全てを記録すると`TLE`＆`MLE`不可避だが、 $k \leq 10$ のお陰で上位10個のみを常に保持するようにすれば問題ない
    - 初めから $-1$ が10個の配列を持たせておいて、`connect`の際に2頂点のそれぞれ10個のうちの上位10個を新たに親となる頂点にもたせるようにした
