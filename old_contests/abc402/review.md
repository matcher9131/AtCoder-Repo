# [ABC402](https://atcoder.jp/contests/abc402/tasks/abc402_d) Review
- バーチャル参加
- またEの壁に阻まれる
  - 解けそうで時間切れになってしまったFといい、まだまだスピードが足りない
  - 結果2000位台で前回のレート増分がちょうど打ち消しに
    - 前回もちゃんとできていたかと言われれば微妙なところなのでまぁ……
- そういえばステータスコード402ってPayment Requiredだったか
  - 今これを使っているサイトはあるんだろうか

## D - Line Crossing
- AC（19分）
- 2直線が平行をベクトルでやろうとして「いやこれ絶対違ぇ！」となり無駄に時間を食う
  - 垂直二等分線がキーであることに気づくのに時間がかかってしまった。いかにも大学入試数学でありそうなパターンなのに！
- 線分 $A_iB_i$ に対しその垂直二等分線を $l_i$ とすると、 直線 $i$ と直線 $j$ が平行 $\Leftrightarrow$ $l_i$ と $l_j$ が一致する
  - $l_i$ と $l_j$ が一致するかどうかは $A_i + B_i \equiv A_j + B_j \pmod N$ で確認できる

## E - Payment Required
- 時間切れ
- ~~提出するたびに金銭が必要になる競プロ……嫌すぎる~~
- bit DPであることには気付いたが期待値の最大値を取るのではなく普通の確率DPをしてしまい解答できず
- 貰うDPでまだ解いていない問題を対象に期待値の最大値を更新すれば問題なかった

## F - Path to Integer
- 時間切れ
- あと20分弱あればいけた…
  - Eを最初からぶん投げてこちらをやっていれば行けていたが、流石にそれはタラレバ話か
- $M$ で割った余りを聞かれているので基本的に全探索するしかなさそうだが、移動経路は $\begin{pmatrix} 2N-2 \\ N-1 \end{pmatrix} \sim 3.5 \times 10^{10} $ 通りでこれは勿論`TLE`
  - しかも組み合わせ全列挙なのでコードも書きづらい
- しばらく経って半分全列挙が使えるのではないかと閃く
  - すなわち移動を前半 $N-1$ 回と後半 $N-1$ 回に分けてあとから気合で合わせる
    - 前半の移動（移動開始時を含む）によってできる長さ $N$ の文字列を整数としてみた値を $S_1$ 、後半の移動（移動開始時を含まない）によってできる長さ $N-1$ の文字列を整数としてみた値を $S_2$ として、前半の移動で到達するマスごとにあり得る $S_1, S_2$ の値を記録しておく
  - それぞれの移動経路は $2^{N-1} \sim 5.2 \times 10^5$ 通りずつなので計算量も問題ないし、いずれも縦方向の移動か横方向の移動を繰り返すだけなのでbit全探索で良くコードも書きやすい
- あとはどうやって合わせるか
  - $S = (S_1 \cdot 10^{N-1} + S_2) \bmod M$ であるから
    - $S_1$ としてあり得る値をすべて $S_1 \cdot 10^{N-1} \bmod M$ に置き換え、 $S_2$ としてあり得る値を事前に昇順にソートしておき、それぞれの $S_1$ について以下を行う
      - $S_1 + S_2 < M$ となる最大の $S_2$ が存在すれば $S_1 + S_2$ をスコアの最大値候補として記録
        - これは二分探索で求める
      - 最大の $S_2$ に対して $(S_1 + S_2) \bmod M$ をスコアの最大値候補として記録
        - $0 \leq S_1 + S_2 < 2M$ なので脳死で最後尾だけを見ていればOK
- 時間計算量は $O(N2^N)$
