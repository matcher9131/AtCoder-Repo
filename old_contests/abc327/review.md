# [ABC327](https://atcoder.jp/contests/abc327/tasks) Review
- バーチャル参加
- Eまで解けて1800位台
- Dをスムーズに解けない症候群が治らない……

## D - Good Tuple Problem
- AC（27分＋1WA）
- $S_i, T_i$ を両端とする無向辺を張ってグラフの形状判定、まではすぐに分かったが
- 森になれば問題ないやろ！→入力例の多重辺持ちに弾かれる
- 多重辺を取り去って森判定すればええやろ！→`WA`
- ここでようやく二部グラフ判定問題だと気づく
  - ｇｄｇｄ過ぎィ！

## E - Maximize Rating
- AC（41分＋3WA）
- ~~すごく見覚えのある式ですね……~~
  - ~~第2項がえらく簡略化されてますけど……~~
- 第1項の分子のみ注目して2要素DP
  - $\sum_{i=1}^{k+1} 0.9^{k+1-i} Q_i = Q_{k+1} + 0.9\sum_{i=1}^k 0.9{k-i} Q_i$ を用いて遷移する
- しかし遷移できない箇所を遷移してしまい`WA`連発
  - $\mathrm{dp}_{i,j}$ を $i$ 番目までで $j$ 個選んだときの最大値としたが、 $i < j$ の範囲でも遷移させてしまっていた
  - 誤差によるものかもしれないといろいろ試していて発見が遅れた
- ちなみにこの方式で自分のレーティングを計算すると $1399$ になる模様
  - 実際のAtCoderのレーティング計算はコンテストを選ぶことはなく全Ratedコンテストを対象にしているので、第2項の件を置いておいても実際よりも高い値が出るはずと思いがちだが
    - 実際のレーティング計算式は「高レーティングなものをより強調するような補正」が入るためこの方式より高い値が出やすい
      - 事実自身の最高レーティングは $1457$ なのでこの方式の方が低い値になっている

## F - Apples
- 時間切れの後に提出
- 問題を以下のように読み替える

> りんご $i$ は時刻 $T_i$ に座標 $X_i$ に出現し、時刻 $T_i + D$ に消滅する。時刻 $S$ にカゴを設置してすぐに回収するとき、カゴが設置される範囲に含まれるりんごの数の最大値はいくらか。

- 以下りんごの出現あるいは消滅をまとめて「イベント」と称す
- 数列 $C_i$ を用意し、イベントごとに以下を行う
  - 出現イベント： 時刻 $T_i$ に $X_i \leq x < X_i + W$ に対して $C_x \gets C_x + 1$ とする
  - 消滅イベント： 時刻 $T_i + D$ に $X_i \leq x < X_i + W$ に対して $C_x \gets C_x - 1$ とする
    - これらの2つを行うことにより、左端が $L-0.5$ になるようにカゴを置いたときに得られるりんごの個数を $C_L$ とすることができる
  - ただしこれらを時刻の昇順に行う
  - 上記の操作の後に時刻 $T_i$ において得られるりんごの数として $\max C$ を得る
- りんごの出現と消滅が同時刻に起こる際は消滅を先に処理することにより、イベントごとに $\max C$ を得て解を更新することができる
- 計算量は $M = \max X$ として $O(N \log M)$
