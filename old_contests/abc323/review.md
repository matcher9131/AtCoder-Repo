# [ABC323](https://atcoder.jp/contests/abc323) Review
- Rated参加
- Fまで解けて大満足
  - そのままのノリでGに突撃して見事に返り討ちに遭う
- レートも1300を突破したので明日も頑張りましょう

## A - Weak Beats
- AC
- 0-indexedと1-indexedで偶数と奇数が入れ替わるのが地味にめんどい

## B - Round-Robin Tournament
- AC
- ソートのラムダ式を書くのを面倒がって、負け数を数えて降順ソートしたものを反転するという謎実装になる

## C - World Tour Finals
- AC (1WA)
- 現時点で最高点ならば $0$ を出力
- そうでないならば点数の高い問題から貪欲に解く
  - $A_i$ を点数と問題番号の`pair`にして降順ソートしておけば楽
- $A_i$ の添え字を間違えて1敗
  - サンプルケースが通ってしまうのが悪い（責任転嫁）

## D - Merge Slimes
- AC
- $k$ を奇数として $k2^i$ をまとめて考えれば、合成前の数から合成後の数を計算できる（すなわち合成後の状態を作る必要がない）ので計算量も減るのだが
  - ~~面倒くさいので~~サイズの小さいほうから貪欲に合成していくだけのゴリ押し方針を採用
    - 制限時間が2秒じゃなくて3秒なのもあって多少ガバっても通ると判断
      - 結果1810msで通ったのでヨシ！
- $C_i$ を単なる配列で管理すると`TLE`を喰らうので`map<int, int>`でサイズと数を管理
- 計算量は $O \left( \displaystyle N \log N \sum_{i = 1}^{N} \log C_i \right)$ のはず

## E - Playlist
- AC (1WA)
- DPなのは恐らく間違いないと見て、はじめに考えたのは $dp_{i,j}$ を「$i$ 秒後に曲 $j$ が流れ始める確率」だったが
  - $dp_{i,j}$ を更新するのに計算量 $O(N)$ が必要なので全体で $O(XN^2)$ となり`TLE`必至
- よくよく考えると「$i$ 秒後に曲が終わる場合における、次に曲 $j$ が流れ始める条件付き確率」はどの曲も等しく $1/n$ であるから、2要素DPではなく1要素DPで行けるのではないかと思いつく
- すなわち $dp_i$ を「$i$ 秒後に曲が切り替わる確率」とすると
  - 初期値：$dp_0 = 1$
  - 更新：$1 \leq j \leq N$ に対して、$\displaystyle dp_{i + T_j} = \frac{1}{n} dp_i$
  - 解：$\displaystyle \frac{1}{n} \sum_{i = \max \{ 0, \ X - T_0 + 1 \}}^{X} dp_i$
- 計算量は $O(NX)$
- なお解を求める部分の $X - T_0 + 1$ が負になる可能性を考慮しそびれて1敗

## F - Push and Carry
- AC
- F問題だから何を要求されるのかと身構えたがどうも8通りの場合分けをすれば解けそうと気づく
- 例えば、はじめの荷物の場所 $(X_B, Y_B)$ から見て目的地 $(X_C, Y_C)$ が右上方向の場合、事実上最小値たりうるのは以下の2つ
  - 右→上パターン
      1. 荷物の左 $(X_B - 1, Y_B)$ に移動する
      1. 荷物をずっと右へ押して $(X_C, Y_B)$ まで持っていく
      1. 荷物の下 $(X_C, Y_B - 1)$ に移動する
      1. 荷物をずっと上へ押して $(X_C, Y_C)$ まで持っていく
  - 上→右パターン
      1. 荷物の下 $(X_B, Y_B - 1)$ に移動する
      1. 荷物をずっと上へ押して $(X_B, Y_C)$ まで持っていく
      1. 荷物の左 $(X_B - 1, Y_C)$ に移動する
      1. 荷物をずっと右へ押して $(X_C, Y_C)$ まで持っていく
- 右下、左上、左下も同様
- 他に $X_B = X_C$ となるパターンで上下の2つ、$Y_B = Y_C$ となるパターンで左右の2つがある
- さらに気を付けないとならないのは、はじめに高橋君が荷物のそばまで行くまでの移動回数で
  - 高橋君と荷物が上下左右のいずれか一直線上に存在し（すなわち $X_A = X_B$ あるいは $Y_A = Y_B$）、かつ高橋君から見て荷物の向こう側に行く場合は回り込むのに2回余分に移動が必要である
  - ↑でない場合は荷物が邪魔にならない移動方法が必ず存在するので単に両座標のマンハッタン距離そのものでよい