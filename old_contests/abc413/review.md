# [ABC413](https://atcoder.jp/contests/abc413) Review
- Rated参加
- 時間ギリギリでE,Fを滑り込んでなんとか900位以内
  - Fまで解けたのに順位が厳しいぜ……
  - 4回振りのパフォーマンス青だがレートは+19止まり
    - レーティング青は遠い……

## D - Make Geometric Sequence
- AC（17分+1WA）
- $|A_i| = |A_j|$ となるような $i < j$ が存在する場合
  - 公比として可能性があるのは $\pm 1$ のみなので、$A$ を並び替えて等比数列が作れる必要十分条件は以下
    - 任意の $i,j$ に対し $|A_i| = |A_j|$
    - $A_i < 0$ となる $i$ の個数が $0, \lfloor \frac{N}{2} \rfloor, \lceil \frac{N}{2} \rceil, N$ のいずれか
- $|A_i| = |A_j|$ となるような $i < j$ が存在しない場合
  - 公比として $\pm 1$ はあり得ないので、$A$ を並び替えて等比数列が作れる必要十分条件は以下
    - $|A_i|$ の昇順で並び替えた列が等比数列をなす
      - $|r| < 1$ となる等比数列が作れる場合、これの順序を反転することで $|r| > 1$ となる等比数列が作れるのでこれでよい
    - 等比数列になっているかどうかの判定は $1 \leq i \leq N-2$ に対し $A_iA_{i+2} = A_{i+1}^2$ が成り立つかどうかを確認すればOK
      - 公比が非整数でも問題ないためこれが一番
- 計算量は $O(N \log N)$
- なお公比 $\pm 1$ のときの2つ目の条件を盛大に間違えて`WA`
  - テストケース32個中30個`WA`で焦ったぜ……
    - そんなに公比 $\pm 1$ を各テストケースに仕込んでいるとは思わなんだ


## E - Reverse 2^i
- AC（22分＋1WA）
- おそらく $b$ の降順に操作するかしないかを決めてやるパターンだなと思いつつも
  - その操作するかしないかの条件がなかなか見えなかった
- Fを解いたあとにふと前半 $2^{b-1}$ 個の最小値と後半 $2^{b-1}$ 個の最小値を比較すればいいのでは？と突然閃き終了3分前に滑り込みで提出
- 具体的には以下
  - $b = N, N-1, \dots, 1$ の順に以下を行う
    - $a = 0, 1, \dots, 2^{N-b} -1$ の順に以下を行う
      - 区間 $[a \cdot 2^b, a \cdot 2^b + 2^{b-1})$ の最小値が区間 $[a \cdot 2^b + 2^{b-1}, (a+1)2^b)$ の最小値より大きければ、区間 $[a \cdot 2^b, (a+1)2^b)$ を反転する
- 区間最小値を得るために`segtree`を使ったので計算量は $O(N^2 2^N)$


## F - No Passage
- AC（47分）
- ゴールとなるマスに $0$ を書き込む
- $i = 0, 1, \dots$ の順に対象となるマスがなくなるまで以下を行う
  - $i$ が書き込まれたマスの隣接マスのうち空欄のものに対して以下を行う
    - 対象となるマスの隣接マスのうち2つ以上に数字が書き込まれている場合
      - 2つ目に小さい数+1を対象となるマスに書き込む
    - 対象となるマスの隣接マスのうち1つ以下に数字が書き込まれている場合
      - 何もしない
- 隣接マスのうち2つ以上が確定しているマスから埋めればOKというのに気づくのにも時間を要したうえに、そのマスの検出を実現するのにも苦戦した
  - 結局 $C_{i,j}$ を用意してすべて $0$ で初期化し、マス $(i,j)$ に数値を書き込んだときにその隣接マスすべての $C_{i', j'}$ をインクリメントし、 $C_{i', j'} = 2$ となったものから`queue`にぶち込むことでなんとかした
    - 公式解説を見る限りこの方針で問題ないようである