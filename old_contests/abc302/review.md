## [ABC302](https://atcoder.jp/contests/abc302) Review
- バーチャル参加
- Fが2度目とはいえまさかのGまで制覇
  - とはいえやはりGが簡単（青色）だったようで400位弱

## D - Impartial Gift
- AC（11分）
- $A, B$ をそれぞれ昇順でソートしておく
- $i$ を固定したときに $A_i - D \leq B_j \leq A_i + D$ となる $j$ を二分探索で求めることはできるが、複数ヒットしまくると`TLE`不可避
  - ここで解となる $(i, j)$ の組が存在する場合、 $A_i \leq B_j \leq A_i + D$ または $B_j \leq A_i \leq B_j + D$ のいずれかは満たすことに留意すると
    - $A_i + D$ を超えない最大の $B_j$ 、あるいは $B_j + D$ を超えない最大の $A_i$ を探索すればその中に必ず解が含まれることがわかる
- $i = N, N-1, \dots, 1$ の順に $B_j \leq A_i + D$ となる最大の $B_j$ を二分探索で探す
  - 見つかってかつ $A_i - D \leq B_j$ ならば $A_i + B_j$ を解の対象とする
    - このときすでに $A_i + B_j$ より大きい解が見つかっていれば探索を止める
  - 見つからない、あるいは $B_j < A_i - D$ ならば次の $i$ へ
- $B$ に対しても↑と同様に $j = M, M-1, \dots, 1$ の順で探索を行う
- 計算量は $O(N \log N + M \log M + N \log M + M \log N)$
- （公式解説） $B$ をソートせずに各 $B_j$ について探索すればよかったのか……

## E - Isolation
- AC（11分）
- 削除クエリが厄介で、これにより $v$ に隣接する頂点で（ $v$ の削除前に）次数1の頂点も解の対象になる上に、複数の削除クエリにより隣接頂点との辺が全て剥がされて解の対象になる頂点も出てくるため、辺の削除をきっちり追わないといけなくなる
- が、辺の数はグラフ全体でも高々 $Q$ 本なので追加・削除をそのまま行っても計算量的に問題ない
  - この手の問題は辺の追加・削除をまともにやると`TLE`になるものがほとんどなので裏をかかれた
- ただし解については毎度数え上げていては間に合わないので、辺の追加・削除時に差分を取ればOK
- 計算量は`unordered_set`を用いて $O(Q)$

## F - Merge Set
- AC（6分）
- **辺の数が多すぎるときは超頂点**

## G - Sort from 1 to 4
- AC（42分＋2RE）
- 要素の種類数が少ないのでゴリ押し数え上げが利くのではと考え、それを実行した
- $x$ が来るべきところに $x$ が存在する
  - 勿論そのまま
- $x$ が来るべきところに $y$ が存在し、 $y$ が来るべきところに $x$ が存在する
  - この2つを入れ替えて解に $1$ を加える
- $x$ が来るべきところに $y$ が存在し、 $y$ が来るべきところに $z$ が存在し、 $z$ が来るべきところに $x$ が存在する
  - この3つを入れ替えて解に $2$ を加える
- $x$ が来るべきところに $y$ が存在し、 $y$ が来るべきところに $z$ が存在し、 $z$ が来るべきところに $w$ が存在し、 $w$ が来るべきところに $x$ が存在する
  - この4つを入れ替えて解に $3$ を加える
- `vector<vector<set<ll>>>`を $x$ が来るべきところに $y$ が存在するようなインデックスの集合としておき、入れ替え操作の代わりに集合から対象となるインデックスを削除した
- あとはあり得る全ての $x,y,z,w$ の組み合わせに対して順に↑を行うのみ
- 結果的にやっていることは公式解説（ユーザー解説のほう）どおりになった
  - なお勿論ながらこのアルゴリズムの正当性を示すことなどできない（おい）
    - 公式解説でも書くのにかなり時間を要したっぽいのでまぁ……
      - って2年以上前のコンテストなのにこの解説が書かれたのが28日前ってどういうことなの……
