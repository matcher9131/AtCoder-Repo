# [ABC345](https://atcoder.jp/contests/abc345) Review
- バーチャル参加
- EもFも解けずこれはアカンやつかと思われたが意外にも700位台
  - ってEもFも青どころか黄色なんかい！

## C - One Time Swap
- AC（15分）
- $S$ 内に同じ文字がない場合は解は $\begin{pmatrix} N \\ 2 \end{pmatrix}$
- $S$ 内に同じ文字がある場合、文字 $i$ が $C_i$ 個存在するとすると
  - 解は ${\displaystyle \begin{pmatrix} N \\ 2 \end{pmatrix} - \sum_i \begin{pmatrix} C_i \\ 2 \end{pmatrix} + 1}$
  - 最後の $+1$ は $S$ に一致する文字列が存在するため
- こう書くと容易く見えるが、実際に解いているときは短い文字列で愚直解を求めまくったので少々時間がかかってしまった

## D - Tiling
- AC（37分）
- あらかじめタイルの順序を決める。この $N!$ 通りに対してそれぞれ以下を試みる
  - 各タイルをそのまま使うか、90度回転させて使うかを決める。この $2^N$ 通りに対してそれぞれ以下を試みる
    - タイルが置かれていないマスのうち最も上の行あるもの（その行内で複数ある場合は最も左にあるもの）が左上になるようにタイルを置くことを試みる
      - グリッドをはみ出してしまう場合や既にタイルが置かれたマスと重なってしまう場合は置かない
      - そうでなければそのまま置く
    - 全タイルに対して操作が終わったとき、すべてのマスにタイルが置かれていれば`Yes`を出力して終了する
- すべてのパターンで失敗した場合は`No`を出力して終了する
- 計算量は $O(N! 2^N NHW) \approx 4.5 \times 10^8$ だがタイルの大きさ次第でもっと減るので間に合う
- 左上から順に埋める全パターンを愚直に試みる解が時間内に間に合うことに自信が持てずもたついてしまった
- （公式解説）タイルが置けないときは以降を考える必要がない（枝刈りができる）ことに気づいていなかった……

## E - Colorful Subsequence
- 時間切れ
- DPだろうなぁと思いつつも $O(NK)$ 解法が思い浮かばず
- （公式解説）……なんだこれは（白目）
  - $\mathrm{dp}_{i,j,k}$ （ $i$ 番目まで見て $j$ 個取り除き、最も右のボールの色が $k$ となるときの残ったボールの価値の総和の最大値）は確かに考えたが、すぐに絶対`TLE`やんけ！と切り捨ててしまった
  - そこから各 $(i,j)$ に対して $(\mathrm{dp}_{i,j,k}, k)$ を降順に2つ記録しとけば高速化できる！とはならないんすよ…… 
- DPって本当に工夫次第でいくらでも速くなるものなんだなと痛感させられる一問だった

## F - Many Lamps
- 時間切れ
- まだこっちのほうが行けた感
- 葉から操作するんだろうなと思いつつ、点いているランプの数が変化しないか2個増えることに気づかず
- DFS帰りがけ順についてのメモ：
```cpp
void dfs(int from) {
    visited[from] = true;
    for (const int to : g[from]) {
        if (visited[to]) continue;
        dfs(to);
        // ここでも帰りがけ順の操作が可能（対象は頂点to）
        // fromとtoの双方を使う場合はむしろここに書いたほうがよい
    }
    // ここで帰りがけ順の操作が可能（対象は勿論from）
}
```
