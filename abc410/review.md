# [ABC410](https://atcoder.jp/contests/abc410) Review
- Rated参加
- 32分でA,B,C,Eを解くもその後がサッパリで2000位台
  - 思いの外順位が低くてビビる
  - Dが緑色……だと……？
    - そんな簡単に思いつくもんかねぇ？

## D - XOR Shortest Walk
- 時間切れ
- ビットの上から確定させようにも複数のwalkを記憶する必要があり無理ゲー
- 開き直って同じ辺を3度以上使わないようにしてバックトラックで実装するも勿論`TLE`
- 頂点倍加は疑ったがまさか1024倍にするとは思わんやん……
  - 今までは2倍とかせいぜいビット桁数倍ぐらいだったし……
    - 経験の無さが出てしまったか

## E - Battles in a Row
- AC（20分）
- パット見で思いつく何番目のモンスター,残りHP,残りMPの3要素DPは`TLE`してしまうが
  - おそらくDP以外は無理だよなぁと考えを巡らせる
- 通常のDP問題と異なり $i$ 番目を採用しない（＝ $i$ 番目のモンスターを倒さない）というのは不可能なのがミソ
- というわけで $\mathrm{dp}_{i,m}$ を $i$ 番目まで倒したときに残りMPが $m$ となる場合の残りHPの最大値とおいて、
  - MPが残っていれば魔法で倒す更新をする（ $\mathrm{dp}_{i+1,m-B_i} \gets \mathrm{dp}_{i,m}$ ）
  - HPが残っているかどうかにかかわらず物理で倒す更新をする（ $\mathrm{dp}_{i+1,m} \gets \mathrm{dp}_{i} - A_i$ ）
    - 本来倒せないときは値が負になるが、逆に負であることが不可能な遷移であることを示してくれる
  - （ただし、更新式は最大値を取る操作を省いた）
- 解は $\mathrm{dp}_{i,m} \geq 0$ となるような $i$ の最大値（ $m$ はなんでもよい）

## F - Balanced Rectangles
- 時間切れ
- 2次元累積和として領域 $[i_1, i_2) \times [j_1, j_2)$ に存在する`#`の個数から`.`の個数を引いたものを考えるも、判定が4乗オーダー $O(H^2W^2)$ になってしまい断念
- （公式解説）あくまでどちらかの方向のみの1次元累積和で保持し、累積和を取らなかった方向に関しては素直に全探索することで3乗オーダー $O(H^2W)$ または $O(HW^2)$ にできる
  - 必ず $H \leq W$ となるように取れば $O(H^2W)$ に固定できる
- Zero-Sum Ranges: $\sum_{i=l}^r A_i = 0 \Leftrightarrow S_r - S_{l-1} = 0$
  - よって場合の数のみが必要になるときは $S_i$ の取る値と個数の辞書 $D_j$ を用意し、 $i = 1, 2, \dots, N$ の順に $\mathrm{ans} \gets \mathrm{ans} + D_{S_i}$ としてから $D_{S_i} \gets D_{S_i} + 1$ とすることで求まる
  - 今回の場合は`unordered_map`などを使ってしまうとアロケーションが $O(H^2)$ 回発生するので`TLE`だが、取る値が $-HW \leq x \leq HW$ に収まるので配列を使っても`MLE`しない
    - ただしリセットのときに`d.assign(d.size(), 0)`などとやってしまうと全体計算量が $O(H^3W)$ となってしまう
    - この配列自体の空間計算量は $O(HW)$ だが更新は $O(W)$ しかないのがミソで、すなわち更新と逆の操作（ $D_{S_i} \gets D_{S_i} - 1$ ）をすれば $O(W)$ で十分
