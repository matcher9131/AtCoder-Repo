# [ABC431](https://atcoder.jp/contests/abc431) Review
- Rated参加
- 実に5ヶ月ぶりのHighest更新！

## D - Robot Customize
- AC（7分）
- $\mathrm{dp}_{i, j}: $ $i$ 番目までの部品を取り付けて頭の重さが $j$ になるときの嬉しさの最大値
  - 最近のD問題とは思えないほど素直な典型的DP
- 計算量は $O(N^2 W)$

## E - Reflection on Grid
- AC（28分）
- `(行, 列, どの方向から来たか)`を頂点とするDijkstraをやりたいが
  - 同じマスを2度通る可能性があり、1度目でタイプを変えた場合はそれが適用されない点に留意する必要がある
    - しかし同じマスを2度通る場合はタイプを変更しないのが得とわかる
      - 例えばタイプAのマスに左方向から入るとき
        - 最終的に左方向に行く: そのマスに左方向から入るのがそもそも損
        - 最終的に右方向にいく: そのまま通るのが最善
        - 最終的に下/上方向に行く:
          - そのマスを右へ通過してから一切操作せずに2度目に上/下方向から入れるならばそれが最善
          - そうでない場合、「タイプB/Cに変更して一度だけ通る」よりも得なルートが存在しない
      - 他のタイプ・進入方向でも同様
- よってこの解法でOK

## F - Almost Sorted 2
- AC（43分）
- $A$ を昇順にソートしておく
- $A_1, A_2, \dots, A_{i-1}$ を並び替えてできる条件を満たす列に $A_i$ を挿入することを考える
  - このとき、 $A_j \geq A_i - D$ を満たす $A_j$ の直前にのみ挿入でき、その場合の数は`lower_bound`で得られる
    - よって $i = 2, 3, \dots, N$ の順にそれを求めて掛け合わせればよい
- ただし同じ数字を別扱いしてしまっているので、割ることで重複を取り除く必要がある
- 計算量は $O(N \log N)$
