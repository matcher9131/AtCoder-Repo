# [ABC365](https://atcoder.jp/contests/abc365) Review
- バーチャル参加
- 緑色は解けるぞ！緑色は！

## D - AtCoder Janken 3
- AC
- 青木くんが $i$ 回目に出した手を $A_i$ （ $0$ がグー、 $1$ がパー、 $2$ がチョキを表す）として、 $\mathrm{dp}_{i,j}$ を $i$ 回目に出した手が $j$ のときの $i$ 回目までの勝数の最大値（ただし負けてしまう手の場合は $-1$ ）とおくと
  - $\mathrm{dp}_{i,j}$ は以下のように遷移できる（ $j$ は $\bmod{3}$ とする）
    - $\mathrm{dp}_{i, A_i} = \max \{ \mathrm{dp}_{i, A_i}, \mathrm{dp}_{i-1, A_i+1}, \mathrm{dp}_{i-1, A_i+2} \}$ （引き分け）
    - $\mathrm{dp}_{i, A_i + 1} = \max \{ \mathrm{dp}_{i, A_i+1}, \mathrm{dp}_{i-1, A_i+2} + 1, \mathrm{dp}_{i-1, A_i} + 1 \}$ （勝ち）
    - $\mathrm{dp}_{i, A_i + 2} = -1$ （負け）
    - ただしいずれにおいても $-1$ からの遷移は禁止する
- （公式解説）題意からして絶対に1勝以上はできるので $-1$ からの遷移を禁止しなくてもよかった

## E - Xor Sigma Problem
- AC
- $S_i = A_1 \oplus A_2 \oplus \dots \oplus A_i$ （ただし $S_0 = 0$ ）とおくと、 $\mathrm{XOR}$ の逆元も $\mathrm{XOR}$ であることから、 $A_i \oplus A_{i+1} \oplus \dots \oplus A_j = S_j \oplus S_{i-1}$ とできる
- $i$ を固定して考える
  - 求めたいのは $\sum_{j=i+1}^{N} (S_j \oplus S_{i-1})$ であり、これをビットごとに考える
    - $S_{i-1}$ の $k$ ビット目が $1$ のとき、
      - $S_{i+1}, S_{i+2}, \dots S_N$ のうち $k$ ビット目が $0$ のものは和に寄与し、 $1$ のものは寄与しない
    - $S_{i-1}$ の $k$ ビット目が $0$ のとき、
      - $S_{i+1}, S_{i+2}, \dots S_N$ のうち $k$ ビット目が $1$ のものは和に寄与し、 $0$ のものは寄与しない
  - いずれにおいても $i+1 \leq j \leq N$ において $S_j$ の $k$ ビット目が $1$ になるものの個数が高速に求まればよいので、 $j \leq i$ における $S_j$ の $k$ ビット目が $1$ になるものの個数 $T_{i,k}$ を累積和の要領であらかじめ求めておけばビットごとに計算量 $O(1)$ でいける
- あとは $i$ を変化させて和を取るのみ
- （公式解説） $T_{i,k}$ を用意しなくてもビットごとの $0$ の個数と $1$ の個数の積で求まるのか…考察が足りんなぁ
