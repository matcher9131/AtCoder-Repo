# [あさかつ9/22](https://kenkoooo.com/atcoder/#/contest/show/cf007c31-0bdf-4111-b5ad-88bea5554c5a) Review

## 第4問 - Flip to Gather
- AC（9分）
- $\mathrm{dp}_{i,j}$ を $i$ 文字目まで見て状態 $j$ にするのに必要な操作回数の最小値とすればOK
  - $j=0$: 区間 $[0, i]$ が`0`
  - $j=1$: $0 \leq j < i$ となる $j$ が存在して区間 $[0,j]$ が`0`で区間 $(j,i]$ が`1`
  - $j=2$: $0 \leq j < k < i$ となる $j,k$ が存在して区間 $[0,j]$ が`0`、区間 $(j,k]$ が`1`、区間 $(k,i]$ が`0`

## 第5問 - Double Sum
- AC（15分）
- 全体から何かテクいことをするのではなく、少なくとも外側のシグマに関してはそのまま地で行くパターン
- $j < i$ かつ $A_j < A_i$ を満たす項の個数を $C_i$ 、和を $S_i$ とすると、 $A_i$ に関する解への寄与は $C_iA_i - S_i$
  - よってSegment treeなどで $C_i, S_i$ に相当するものを管理しながら $i = 1, 2, \dots N$ の順に足し合わせれば解が求まる
    - なお座圧が必要となる
- 計算量は $O(N \log N)$

## 第6問 - #(subset sum = K) with Add and Erase
- 時間切れ
- $\mathrm{dp}_{i}: $ 箱からボールをいくつか取り出して、ボールに書かれた整数の総和を $i$ にする場合の数とすればよいのはすぐに気づき、追加クエリの処理はすぐにできたが
  - 削除クエリの方針が全く立たず
    - （公式解説）単にまるっきり逆順で処理すればよいことに何故気づかなかったのか……
      - ちょっと考えはしたが $\mathrm{dp}_{i} \gets \mathrm{dp}_{i} - \mathrm{dp}_{i-x}$ を**同時に**処理してしまい負数が出てしまったので撤退してしまった
        - 同時に処理すると何かおかしいときは**逐次的に**処理して合わないかどうかを考えるべき
