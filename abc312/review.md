# ABC312 Review
- Rated参加
- 前回と同じく`WA`も`TLE`もなくEまで駆け抜けられた
  - 前回がまぐれではなかったことの証左（なのか？）
- 実装速度はまだまだ遅い
  - 今回はEがギリギリ滑り込みセーフだった
  - つまらぬミスをしてデバッグに時間がかかっている


## A. Chord
- AC
- `if`内に論理OR`||`で繋ぎまくった条件を書くというスーパーゴリ押し実装
  - せめて配列使えよと自分でも思わなくはない
    - C#脳のときは`new string[]{ "ACE", "BDF", "CEG", "DFA", "EGB", "FAC", "GBD" }.Contains(s)`とか
    - TypeScript(JavaScript)脳のときは`["ACE", "BDF", "CEG", "DFA", "EGB", "FAC", "GBD"].includes(s)`とか書きそうなのに不思議なもんだ
- 問題タイトルは音楽における和音コードからと思われる
  - ACE、BDF、…GBDは順にイ短調におけるIの和音、IIの和音、…VIIの和音となっている

## B. TaK Code
- AC
- ~~だからグリッドの高さと幅は $H$ と $W$ にしてっつってんだろ！~~
- 各左上マス $(i, j)$ ごとに32マスをゴリゴリ調べる脳筋実装
  - はじめループの条件を`i < n - 9`にしてて事故りかけたのは内緒（正しくは`i <= n - 9`）
    - 入力例に $(i, M - 8)$ が左上マスになるパターンがあって助かった…
- 問題タイトルはQRコードが由来か
  - 実際のQRコードは右下以外の3か所に正方形状の模様があり、かつその正方形の周囲は白い

## C. Invisible Hand
- AC
- 二分探索なのはすぐにわかったが、$X$ が条件を満たす値段なのかどうかの判定に手間取った
  - `lower_bound`と`upper_bound`を取り違えたり…
- めぐる式が便利
- 自分の解法： $O(\max \{ N \log N, M \log M \})$（おそらくソートのほうが支配的なはず…）
    1. $A_i$ と $B_i$ をそれぞれ昇順にソートする
    2. 二分探索法で条件を満たす $X$ の最小値を探索する
        - $X$ 円でりんごを売ってもよい人数は $A_i > X$ となる最小の $i$ を`upper_bound`で探せばOK（$i$ 未満が対象）
        - $X$ 円でりんごを買ってもよい人数は $B_i \leq X$ となる最小の $i$ を`lower_bound`で探せばOK（$i$ 以上が対象）
- ってよく見たら試行錯誤してたときの余計な変数が残っとる
- 問題タイトルは市場経済における「（神の）見えざる手」だろう
  - りんごではなく株だと生々しさが増しそうではある

## D. Count Bracket Sequences
- AC
- とりあえずDPなんだろうなぁと思いつつ、括弧列の問題はその時点での`(`の数から`)`の数を引いた値（以降「括弧レベル」と称する）がキーになるというのを思い出す
- 謎に`if`のネストを間違える
  - 一つの`if`でどうにかしようとしないことが大事
- 自分の解法： $O(|S|^2)$
    1. $dp_{i,j}$ を $S$ の先頭 $i$ 文字の括弧レベルが $j$ になるような場合の数とおく
    2. DPを更新する
        - $S_i$ が `(` の場合、$dp_{i, j}$ に $dp_{i - 1, j - 1}$ を加える
        - $S_i$ が `)` の場合、$j > 0$ ならば（括弧レベルがマイナスにならないならば） $dp_{i, j}$ に $dp_{i - 1, j + 1}$ を加える
        - $S_i$ が `?` の場合、↑2つともを行う
    3. $dp_{|S|, 0}$ を答える


## E. Tangency of Cuboids
- AC
- 終了3分前のギリギリ提出
- 区間に対するクエリ系の問題だと思って知っているアルゴリズムをいくつか検討するも、どれもうまくいかなさそう
- $N ^ 2 = 10^{10}$ なので $O(N^2)$ の計算量のものは`TLE`不可避
  - 勿論組み合わせ総当たりも不可
- ここで座標がやたら小さいのは絶対ヒントだと思い、以下を思いつく
  - $100 \times 100 \times 100$ の配列を用意すればどの直方体が $[X, X + 1] \times [Y, Y + 1] \times [Z, Z + 1]$ を満たすのかを記録できる
  - ↑の配列を用いて各直方体の6つの面をゴリ押しで調べれば解がわかる
- あまりの脳筋解答に不安になりつつも、時間もないので`TLE`でもいいやと思って提出したら通ってびっくり
  - 終了後に公式解説を見たら全く同じ解き方が書いてあってさらにびっくり
    - この問題よりもFのほうが正解者が多かったのを見ると、特段のアルゴリズムを必要としない本問は脳筋すぎて逆に思いつかなかった人が多かったのかもしれない
- 自分の解法： $O(100^3)$
    1. $100 \times 100 \times 100$ の配列 $A$ を用意する
    2. 各直方体 $i$ に対し、$X_{i,1} \leq x \le X_{i,2}, Y_{i,1} \leq y \le Y_{i,2}, Z_{i,1} \leq z \le Z_{i,2}$ を満たす全ての $(x, y, z)$ に対して $A_{x,y,z} = i$ とする
    3. 各直方体 $i$ に対し、以下の6つのいずれかを満たす全ての $(x, y, z)$ に対して $A_{x,y,z}$ の値を`unordered_set`で記録し、そのサイズを答える
        - $x = X_{i, 1} - 1, \ Y_{i,1} \leq y \le Y_{i,2}, \ Z_{i,1} \leq z \le Z_{i,2}$
        - $x = X_{i, 2}, \ Y_{i,1} \leq y \le Y_{i,2}, \ Z_{i,1} \leq z \le Z_{i,2}$
        - $y = Y_{i, 1} - 1, \ Z_{i,1} \leq z \le Z_{i,2}, \ X_{i,1} \leq x \le X_{i,2}$
        - $y = Y_{i, 2}, \ Z_{i,1} \leq z \le Z_{i,2}, \ X_{i,1} \leq x \le X_{i,2}$
        - $z = Z_{i, 1} - 1, \ X_{i,1} \leq x \le X_{i,2}, \ Y_{i,1} \leq y \le Y_{i,2}$
        - $z = Z_{i, 2}, \ X_{i,1} \leq x \le X_{i,2}, \ Y_{i,1} \leq y \le Y_{i,2}$

