# ABC314 Review
- Rated参加
- Dまでは`WA`もなくいけたが…
  - Dまでが4500人以上が`AC`なのに対してEの`AC`が800人を切る事態に
    - お願いします、水色問題を出してください（迫真）
- 今回も水色はお預けでまたしてもAGCがお預けに
  - お願いします、ARCも開催してください（迫真）

## A - 3.14
- `AC`
- 文字列として入力を受けて先頭から $N + 2$ 文字を出力するだけ。以上。

## B - Roulette
- `AC`
- 最も少ない人のみを出力という部分を例によって読み落としてグダる
- $N \leq 100$ なのをいいことに、まずは賭けた目の個数の最小値を求めてから、その最小値と等しい個数を賭けた人を探すという二段構造

## C - Rotate Colored Subsequence
- `AC`
- 色ごとに文字の位置と文字そのものを配列として持てばOK
- 自分の解法：$O(N)$ …のはず
    1. 色 $j$ ごとに以下の2つの配列を作る
        - $C_i = j$ となる全ての $i$ を昇順にならべた $P_j = (P_{j,1}, P_{j,2}, \ \dots)$
        - $S_{P_{j, 1}}, S_{P_{j, 2}}, \ \dots$ を順に並べた $T_j = (T_{j,1}, T_{j,2}, \ \dots)$
    1. $T$ の末尾の要素を先頭へ移動させる
    1. 色 $j$ ごとに以下の操作を行う
        - $S_{P_{j, i}}$ を $T_{j,i}$ に置き換える
    1. $S$ を出力する

## D - LOWER
- `AC`
- $NQ \leq 2.5 \times 10^{11}$ なので、$t = 2, 3$ のときいちいちすべての文字を大文字/小文字にしていては間に合わないが
  - 最後のもののみ有効なのでそこをチェックすれば問題なし
- ただし、最後の大文字化/小文字化の後にある $t = 1$ の操作はそのまま生きてくるのでそこだけ注意する必要がある
- 自分の解法：$O(N)$
    1. $N$ 項からなる数列 $A$ を用意して、全項を`-1`で初期化する
    1. $L = -1, U = -1$ とする
    1. 以下のようにクエリを処理する
        - $t_i = 1$ のとき
            1. $S_{x_i}$ を $c_i$ に置き換える
            1. $A_{x_i} \gets i$ とする
        - $t_i = 2$ のとき
            - $L \gets i$ とする
        - $t_i = 3$ のとき
            - $U \gets i$ とする
    1. 以下のように大文字化/小文字化する
        - $L = -1$ かつ $U = -1$ のとき
            - 大文字化も小文字化も行わない
        - $L \gt U$ のとき
            - すべての $i$ に対し、$A_i \lt L$ ならば $S_i$ を小文字化する
        - $L \lt U$ のとき
            - すべての $i$ に対し、$A_i \lt U$ ならば $S_i$ を大文字化する
    1. $S$ を出力する        

## E - Roulettes
- 時間切れ
- とりあえずDPだろうなと思いつつ
  - ルーレットの出目が0のときにDPの同じマスを延々更新し続けて終わらないのではと危惧する
    - しばらくして、出目の0を取り除いて、その分だけ支払う金額を高くすれば良いことに気づく
      - とここで時間切れ
- 1要素では無理だと思い2要素DPを検討するも、現在のポイント以外に何を添え字にしたらいいのかがわからず
  - ここで公式解説をチラ見
    - まさかの1要素DP…だと…！？
    - ただし値は現在の期待値ではなくMポイント以上になるまでの期待値であり、更新は昇順ではなく降順
      - 降順で更新するタイプはほとんどやったことがなかったので、自力で思いつけたかどうかと言われると…

## F - A Certain Game
- 時間切れ
- Union-Findを使うことは見抜けたが
  - 愚直に各試合ごとに期待値を足していく方法しか思いつかず、これでは $O(N^2)$ で確実に`TLE`
- Union-Findに新たな頂点を追加するという発想はなかった
  - 既にある頂点に新たな辺を結ぶものという固定観念良くない
  - ただ状態遷移の様子を思い浮かべれば、新たな状態（＝試合後のチーム）が必要というのはわかったはず
  - **Union-Findは割と自由にカスタマイズできる（2回目）**
    - 今回に関しては`connect()`に対して結構な魔改造（個人の感想）が必要
      - 2頂点を結ぶのではなく、新たに追加する頂点（＝試合後のチーム）・先攻チーム・後攻チームの3つを一度に処理する
      - 親の選び方も変わる。通常は結ぶ2頂点のうちサイズの大きいほうを親にするが、今回は新たに追加する頂点を親とする
      - サイズも実際の木のサイズを表すのではなく、あくまでチームの人数を表すことになる